# https://github.com/hazelcast/user-code-runtime/blob/master/NOTES.md

# install helm
curl -o temp/helm-v3.12.3-linux-amd64.tar.gz https://get.helm.sh/helm-v3.12.3-linux-amd64.tar.gz
(
	cd temp
	tar -zxvf helm-v3.12.3-linux-amd64.tar.gz
)
alias helm=./temp/linux-amd64/helm

# start
helm upgrade --install runtime-controller charts/runtime-controller
kc get pod,svc,deployment

# stop
helm delete runtime-controller

# controller listens on port 50051
# address and ports were hard-coded in UserCodeServiceFactory.java
# now reading environment variables:
# HZ_RUNTIME_CONTROLLER_ADDRESS
# HZ_RUNTIME_CONTROLLER_PORT